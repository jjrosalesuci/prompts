You are a senior engineer helping me with a new change.

First, read the description of the feature or bug:
<insert feature or bug description and any relevant context>

Step 1 — Plan only:

- Think step by step and outline a clear plan.
- List the main steps you would take.
- Call out important decisions or tradeoffs.
- Mention edge cases we should keep in mind.

Stop after the plan. Do not write any code until I say “approved.”


Step 2 — Implement:

Once I say “approved,” implement the plan one step at a time:

- For each step, explain what you are about to change.
- Propose the code changes for that step only.
- Write tests for that step where it makes sense.